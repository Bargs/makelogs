{"version":3,"sources":["../../src/argv/_parseCount.js"],"names":["_","require","module","exports","setupCount","argv","isNumber","count","exprRE","isString","match","num","parseFloat","power","chars","split","length","char","shift","TypeError","Math","pow"],"mappings":";;AAAA,IAAMA,IAAIC,QAAQ,QAAR,CAAV;;AAEAC,OAAOC,OAAP,GAAiB,SAASC,UAAT,CAAoBC,IAApB,EAA0B;AACzC,MAAIL,EAAEM,QAAF,CAAWD,KAAKE,KAAhB,CAAJ,EAA4B;AAC1B,WAAOF,KAAKE,KAAZ;AACD;;AAED,MAAMC,SAAS,iCAAf;AACA,MAAIR,EAAES,QAAF,CAAWJ,KAAKE,KAAhB,KAA0BF,KAAKE,KAAL,CAAWG,KAAX,CAAiBF,MAAjB,CAA9B,EAAwD;AACtD;AACA,QAAMG,MAAMC,WAAWP,KAAKE,KAAhB,CAAZ;AACA,QAAIM,QAAQ,CAAZ;AACA,QAAMC,QAAQT,KAAKE,KAAL,CAAWQ,KAAX,CAAiB,EAAjB,CAAd;;AAEA,WAAOD,MAAME,MAAb,EAAqB;AACnB,UAAMC,OAAOH,MAAMI,KAAN,EAAb;AACA,cAAQD,IAAR;AACE,aAAK,GAAL;AACEJ,mBAAS,CAAT;AACA;AACF,aAAK,GAAL;AACEA,mBAAS,CAAT;AACA;AACF,aAAK,GAAL;AACA,aAAK,GAAL;AACEA,mBAAS,CAAT;AACA;AACF,aAAK,GAAL;AACEA,mBAAS,CAAT;AACA;AACF;AACE,gBAAM,IAAIM,SAAJ,iCAA4CF,IAA5C,OAAN;AAfJ;AAiBD;;AAED,WAAON,MAAMS,KAAKC,GAAL,CAAS,EAAT,EAAaR,KAAb,CAAb;AACD;;AAED,QAAM,IAAIM,SAAJ,CAAc,sCAAd,CAAN;AACD,CArCD","file":"_parseCount.js","sourcesContent":["const _ = require('lodash')\n\nmodule.exports = function setupCount(argv) {\n  if (_.isNumber(argv.count)) {\n    return argv.count\n  }\n\n  const exprRE = /^(?:\\d+(?:\\.\\d+)?)(b|m|t|h|k)+$/\n  if (_.isString(argv.count) && argv.count.match(exprRE)) {\n    // parses just the numbers off the front, ignores trailing characters\n    const num = parseFloat(argv.count)\n    let power = 0\n    const chars = argv.count.split('')\n\n    while (chars.length) {\n      const char = chars.shift()\n      switch (char) {\n        case 'b':\n          power += 9\n          break\n        case 'm':\n          power += 6\n          break\n        case 't':\n        case 'k':\n          power += 3\n          break\n        case 'h':\n          power += 2\n          break\n        default:\n          throw new TypeError(`invalid count, unexpected \"${char}\"`)\n      }\n    }\n\n    return num * Math.pow(10, power)\n  }\n\n  throw new TypeError('Unable to determine the event count.')\n}\n"]}